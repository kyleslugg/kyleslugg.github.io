<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Kyle Slugg - NYCHA Waste Asset Maps</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="" />

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:site_name" content="" />
	<meta property="og:description" content="" />
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="../css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="../css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="../css/bootstrap.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="../css/flexslider.css">
	<!-- Theme style  -->
	<link rel="stylesheet" href="../css/style.css">

	<!-- Modernizr JS -->
	<script src="../js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->


</head>
<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>
<style type="text/css">
	/*-----------------------------------------------------------------------------
	| Copyright (c) Jupyter Development Team.
	| Distributed under the terms of the Modified BSD License.
	|----------------------------------------------------------------------------*/
	
	/*
	The following CSS variables define the main, public API for styling JupyterLab.
	These variables should be used by all plugins wherever possible. In other
	words, plugins should not define custom colors, sizes, etc unless absolutely
	necessary. This enables users to change the visual theme of JupyterLab
	by changing these variables.
	
	Many variables appear in an ordered sequence (0,1,2,3). These sequences
	are designed to work well together, so for example, `--jp-border-color1` should
	be used with `--jp-layout-color1`. The numbers have the following meanings:
	
	* 0: super-primary, reserved for special emphasis
	* 1: primary, most important under normal situations
	* 2: secondary, next most important under normal situations
	* 3: tertiary, next most important under normal situations
	
	Throughout JupyterLab, we are mostly following principles from Google's
	Material Design when selecting colors. We are not, however, following
	all of MD as it is not optimized for dense, information rich UIs.
	*/
	
	:root {
	  /* Elevation
	   *
	   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
	   *
	   * https://github.com/material-components/material-components-web
	   * https://material-components-web.appspot.com/elevation.html
	   */
	
	  --jp-shadow-base-lightness: 0;
	  --jp-shadow-umbra-color: rgba(
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		0.2
	  );
	  --jp-shadow-penumbra-color: rgba(
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		0.14
	  );
	  --jp-shadow-ambient-color: rgba(
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		var(--jp-shadow-base-lightness),
		0.12
	  );
	  --jp-elevation-z0: none;
	  --jp-elevation-z1: 0px 2px 1px -1px var(--jp-shadow-umbra-color),
		0px 1px 1px 0px var(--jp-shadow-penumbra-color),
		0px 1px 3px 0px var(--jp-shadow-ambient-color);
	  --jp-elevation-z2: 0px 3px 1px -2px var(--jp-shadow-umbra-color),
		0px 2px 2px 0px var(--jp-shadow-penumbra-color),
		0px 1px 5px 0px var(--jp-shadow-ambient-color);
	  --jp-elevation-z4: 0px 2px 4px -1px var(--jp-shadow-umbra-color),
		0px 4px 5px 0px var(--jp-shadow-penumbra-color),
		0px 1px 10px 0px var(--jp-shadow-ambient-color);
	  --jp-elevation-z6: 0px 3px 5px -1px var(--jp-shadow-umbra-color),
		0px 6px 10px 0px var(--jp-shadow-penumbra-color),
		0px 1px 18px 0px var(--jp-shadow-ambient-color);
	  --jp-elevation-z8: 0px 5px 5px -3px var(--jp-shadow-umbra-color),
		0px 8px 10px 1px var(--jp-shadow-penumbra-color),
		0px 3px 14px 2px var(--jp-shadow-ambient-color);
	  --jp-elevation-z12: 0px 7px 8px -4px var(--jp-shadow-umbra-color),
		0px 12px 17px 2px var(--jp-shadow-penumbra-color),
		0px 5px 22px 4px var(--jp-shadow-ambient-color);
	  --jp-elevation-z16: 0px 8px 10px -5px var(--jp-shadow-umbra-color),
		0px 16px 24px 2px var(--jp-shadow-penumbra-color),
		0px 6px 30px 5px var(--jp-shadow-ambient-color);
	  --jp-elevation-z20: 0px 10px 13px -6px var(--jp-shadow-umbra-color),
		0px 20px 31px 3px var(--jp-shadow-penumbra-color),
		0px 8px 38px 7px var(--jp-shadow-ambient-color);
	  --jp-elevation-z24: 0px 11px 15px -7px var(--jp-shadow-umbra-color),
		0px 24px 38px 3px var(--jp-shadow-penumbra-color),
		0px 9px 46px 8px var(--jp-shadow-ambient-color);
	
	  /* Borders
	   *
	   * The following variables, specify the visual styling of borders in JupyterLab.
	   */
	
	  --jp-border-width: 1px;
	  --jp-border-color0: var(--md-grey-400);
	  --jp-border-color1: var(--md-grey-400);
	  --jp-border-color2: var(--md-grey-300);
	  --jp-border-color3: var(--md-grey-200);
	  --jp-border-radius: 2px;
	
	  /* UI Fonts
	   *
	   * The UI font CSS variables are used for the typography all of the JupyterLab
	   * user interface elements that are not directly user generated content.
	   *
	   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
	   * is applied to a parent element. When children elements, such as headings, are sized
	   * in em all things will be computed relative to that body size.
	   */
	
	  --jp-ui-font-scale-factor: 1.2;
	  --jp-ui-font-size0: 0.83333em;
	  --jp-ui-font-size1: 13px; /* Base font size */
	  --jp-ui-font-size2: 1.2em;
	  --jp-ui-font-size3: 1.44em;
	
	  --jp-ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,
		Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
	
	  /*
	   * Use these font colors against the corresponding main layout colors.
	   * In a light theme, these go from dark to light.
	   */
	
	  /* Defaults use Material Design specification */
	  --jp-ui-font-color0: rgba(0, 0, 0, 1);
	  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
	  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
	  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);
	
	  /*
	   * Use these against the brand/accent/warn/error colors.
	   * These will typically go from light to darker, in both a dark and light theme.
	   */
	
	  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
	  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
	  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
	  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);
	
	  /* Content Fonts
	   *
	   * Content font variables are used for typography of user generated content.
	   *
	   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
	   * is applied to a parent element. When children elements, such as headings, are sized
	   * in em all things will be computed relative to that body size.
	   */
	
	  --jp-content-line-height: 1.6;
	  --jp-content-font-scale-factor: 1.2;
	  --jp-content-font-size0: 0.83333em;
	  --jp-content-font-size1: 14px; /* Base font size */
	  --jp-content-font-size2: 1.2em;
	  --jp-content-font-size3: 1.44em;
	  --jp-content-font-size4: 1.728em;
	  --jp-content-font-size5: 2.0736em;
	
	  /* This gives a magnification of about 125% in presentation mode over normal. */
	  --jp-content-presentation-font-size1: 17px;
	
	  --jp-content-heading-line-height: 1;
	  --jp-content-heading-margin-top: 1.2em;
	  --jp-content-heading-margin-bottom: 0.8em;
	  --jp-content-heading-font-weight: 500;
	
	  /* Defaults use Material Design specification */
	  --jp-content-font-color0: rgba(0, 0, 0, 1);
	  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
	  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
	  --jp-content-font-color3: rgba(0, 0, 0, 0.38);
	
	  --jp-content-link-color: var(--md-blue-700);
	
	  --jp-content-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
		Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
		'Segoe UI Symbol';
	
	  /*
	   * Code Fonts
	   *
	   * Code font variables are used for typography of code and other monospaces content.
	   */
	
	  --jp-code-font-size: 13px;
	  --jp-code-line-height: 1.3077; /* 17px for 13px base */
	  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
	  --jp-code-font-family-default: Menlo, Consolas, 'DejaVu Sans Mono', monospace;
	  --jp-code-font-family: var(--jp-code-font-family-default);
	
	  /* This gives a magnification of about 125% in presentation mode over normal. */
	  --jp-code-presentation-font-size: 16px;
	
	  /* may need to tweak cursor width if you change font size */
	  --jp-code-cursor-width0: 1.4px;
	  --jp-code-cursor-width1: 2px;
	  --jp-code-cursor-width2: 4px;
	
	  /* Layout
	   *
	   * The following are the main layout colors use in JupyterLab. In a light
	   * theme these would go from light to dark.
	   */
	
	  --jp-layout-color0: white;
	  --jp-layout-color1: white;
	  --jp-layout-color2: var(--md-grey-200);
	  --jp-layout-color3: var(--md-grey-400);
	  --jp-layout-color4: var(--md-grey-600);
	
	  /* Inverse Layout
	   *
	   * The following are the inverse layout colors use in JupyterLab. In a light
	   * theme these would go from dark to light.
	   */
	
	  --jp-inverse-layout-color0: #111111;
	  --jp-inverse-layout-color1: var(--md-grey-900);
	  --jp-inverse-layout-color2: var(--md-grey-800);
	  --jp-inverse-layout-color3: var(--md-grey-700);
	  --jp-inverse-layout-color4: var(--md-grey-600);
	
	  /* Brand/accent */
	
	  --jp-brand-color0: var(--md-blue-700);
	  --jp-brand-color1: var(--md-blue-500);
	  --jp-brand-color2: var(--md-blue-300);
	  --jp-brand-color3: var(--md-blue-100);
	  --jp-brand-color4: var(--md-blue-50);
	
	  --jp-accent-color0: var(--md-green-700);
	  --jp-accent-color1: var(--md-green-500);
	  --jp-accent-color2: var(--md-green-300);
	  --jp-accent-color3: var(--md-green-100);
	
	  /* State colors (warn, error, success, info) */
	
	  --jp-warn-color0: var(--md-orange-700);
	  --jp-warn-color1: var(--md-orange-500);
	  --jp-warn-color2: var(--md-orange-300);
	  --jp-warn-color3: var(--md-orange-100);
	
	  --jp-error-color0: var(--md-red-700);
	  --jp-error-color1: var(--md-red-500);
	  --jp-error-color2: var(--md-red-300);
	  --jp-error-color3: var(--md-red-100);
	
	  --jp-success-color0: var(--md-green-700);
	  --jp-success-color1: var(--md-green-500);
	  --jp-success-color2: var(--md-green-300);
	  --jp-success-color3: var(--md-green-100);
	
	  --jp-info-color0: var(--md-cyan-700);
	  --jp-info-color1: var(--md-cyan-500);
	  --jp-info-color2: var(--md-cyan-300);
	  --jp-info-color3: var(--md-cyan-100);
	
	  /* Cell specific styles */
	
	  --jp-cell-padding: 5px;
	
	  --jp-cell-collapser-width: 8px;
	  --jp-cell-collapser-min-height: 20px;
	  --jp-cell-collapser-not-active-hover-opacity: 0.6;
	
	  --jp-cell-editor-background: var(--md-grey-100);
	  --jp-cell-editor-border-color: var(--md-grey-300);
	  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
	  --jp-cell-editor-active-background: var(--jp-layout-color0);
	  --jp-cell-editor-active-border-color: var(--jp-brand-color1);
	
	  --jp-cell-prompt-width: 64px;
	  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
	  --jp-cell-prompt-letter-spacing: 0px;
	  --jp-cell-prompt-opacity: 1;
	  --jp-cell-prompt-not-active-opacity: 0.5;
	  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);
	  /* A custom blend of MD grey and blue 600
	   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
	  --jp-cell-inprompt-font-color: #307fc1;
	  /* A custom blend of MD grey and orange 600
	   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
	  --jp-cell-outprompt-font-color: #bf5b3d;
	
	  /* Notebook specific styles */
	
	  --jp-notebook-padding: 10px;
	  --jp-notebook-select-background: var(--jp-layout-color1);
	  --jp-notebook-multiselected-color: var(--md-blue-50);
	
	  /* The scroll padding is calculated to fill enough space at the bottom of the
	  notebook to show one single-line cell (with appropriate padding) at the top
	  when the notebook is scrolled all the way to the bottom. We also subtract one
	  pixel so that no scrollbar appears if we have just one single-line cell in the
	  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
	  */
	  --jp-notebook-scroll-padding: calc(
		100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
		  var(--jp-code-padding) - var(--jp-cell-padding) - 1px
	  );
	
	  /* Rendermime styles */
	
	  --jp-rendermime-error-background: #fdd;
	  --jp-rendermime-table-row-background: var(--md-grey-100);
	  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);
	
	  /* Dialog specific styles */
	
	  --jp-dialog-background: rgba(0, 0, 0, 0.25);
	
	  /* Console specific styles */
	
	  --jp-console-padding: 10px;
	
	  /* Toolbar specific styles */
	
	  --jp-toolbar-border-color: var(--jp-border-color1);
	  --jp-toolbar-micro-height: 8px;
	  --jp-toolbar-background: var(--jp-layout-color1);
	  --jp-toolbar-box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.24);
	  --jp-toolbar-header-margin: 4px 4px 0px 4px;
	  --jp-toolbar-active-background: var(--md-grey-300);
	
	  /* Input field styles */
	
	  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
	  --jp-input-active-background: var(--jp-layout-color1);
	  --jp-input-hover-background: var(--jp-layout-color1);
	  --jp-input-background: var(--md-grey-100);
	  --jp-input-border-color: var(--jp-border-color1);
	  --jp-input-active-border-color: var(--jp-brand-color1);
	  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);
	
	  /* General editor styles */
	
	  --jp-editor-selected-background: #d9d9d9;
	  --jp-editor-selected-focused-background: #d7d4f0;
	  --jp-editor-cursor-color: var(--jp-ui-font-color0);
	
	  /* Code mirror specific styles */
	
	  --jp-mirror-editor-keyword-color: #008000;
	  --jp-mirror-editor-atom-color: #88f;
	  --jp-mirror-editor-number-color: #080;
	  --jp-mirror-editor-def-color: #00f;
	  --jp-mirror-editor-variable-color: var(--md-grey-900);
	  --jp-mirror-editor-variable-2-color: #05a;
	  --jp-mirror-editor-variable-3-color: #085;
	  --jp-mirror-editor-punctuation-color: #05a;
	  --jp-mirror-editor-property-color: #05a;
	  --jp-mirror-editor-operator-color: #aa22ff;
	  --jp-mirror-editor-comment-color: #408080;
	  --jp-mirror-editor-string-color: #ba2121;
	  --jp-mirror-editor-string-2-color: #708;
	  --jp-mirror-editor-meta-color: #aa22ff;
	  --jp-mirror-editor-qualifier-color: #555;
	  --jp-mirror-editor-builtin-color: #008000;
	  --jp-mirror-editor-bracket-color: #997;
	  --jp-mirror-editor-tag-color: #170;
	  --jp-mirror-editor-attribute-color: #00c;
	  --jp-mirror-editor-header-color: blue;
	  --jp-mirror-editor-quote-color: #090;
	  --jp-mirror-editor-link-color: #00c;
	  --jp-mirror-editor-error-color: #f00;
	  --jp-mirror-editor-hr-color: #999;
	
	  /* Vega extension styles */
	
	  --jp-vega-background: white;
	
	  /* Sidebar-related styles */
	
	  --jp-sidebar-min-width: 250px;
	
	  /* Search-related styles */
	
	  --jp-search-toggle-off-opacity: 0.5;
	  --jp-search-toggle-hover-opacity: 0.8;
	  --jp-search-toggle-on-opacity: 1;
	  --jp-search-selected-match-background-color: rgb(245, 200, 0);
	  --jp-search-selected-match-color: black;
	  --jp-search-unselected-match-background-color: var(
		--jp-inverse-layout-color0
	  );
	  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);
	
	  /* Icon colors that work well with light or dark backgrounds */
	  --jp-icon-contrast-color0: var(--md-purple-600);
	  --jp-icon-contrast-color1: var(--md-green-600);
	  --jp-icon-contrast-color2: var(--md-pink-600);
	  --jp-icon-contrast-color3: var(--md-blue-600);
	}
	</style>
	
	<style type="text/css">
	a.anchor-link {
	   display: none;
	}
	.highlight  {
		margin: 0.4em;
	}
	
	/* Input area styling */
	.jp-InputArea {
		overflow: hidden;
	}
	
	.jp-InputArea-editor {
		overflow: hidden;
	}
	
	@media print {
	  body {
		margin: 0;
	  }
	}
	</style>
<body>
	<div id="colorlib-page">
		<a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
		<aside id="colorlib-aside" role="complementary" class="border js-fullheight">
			<div id='colorlib-logo'><a href="../index.html"><img src='../images/logo.png'
						style="width: 70px; height:auto; text-align: right;"></a></div>
			<nav id="colorlib-main-menu" role="navigation">
				<ul>
					<li class="colorlib-active"><a href="../index.html">Home</a></li>
					<li><a href="../index.html#recent-work">Work</a></li>
					<li><a href="../content/Slugg_Kyle_Resume.pdf" target="_blank">Resume</a></li>
					<li><a href="mailto:kyle@kyleslugg.com">Contact</a></li>
				</ul>
			</nav>

			<div class="colorlib-footer">
				<ul>
					<li><a href="https://www.linkedin.com/in/kyle-slugg/"><i class="icon-linkedin2"></i></a></li>
					<li><a href="https://www.linkedin.com/in/kyle-slugg/"><i class="icon-github"></i></a></li>
					<li><a href="https://twitter.com/kyleslugg"><i class="icon-twitter2"></i></a></li>
					<li><a href="https://www.instagram.com/kyleslugg/"><i class="icon-instagram"></i></a></li>

				</ul>
				<p style="color: aliceblue; font-size: 0px;">
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					Copyright &copy;<script>
						document.write(new Date().getFullYear());
					</script> All rights reserved | This template is made with <i class="icon-heart"
						aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --> </span>
				</p>
			</div>

		</aside>

		<div id="colorlib-main">

			<div class="colorlib-work">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-6 col-md-offset-3 col-md-pull-3">
							<span class="heading-meta">Portfolio</span>
							<h2 class="colorlib-heading animate-box" data-animate-effect="fadeInLeft">Measuring Voter Turnout among NYCHA Residents</h2>
						</div>
					</div>


					<div class="row">
						<div class=row>
							<div class="col-lg-11">
								<div style="width:90%; margin-left:auto; margin-right:auto;">
							 <h3 id="Mission-and-Purpose">Mission and Purpose<a class="anchor-link" href="#Mission-and-Purpose">&#182;</a></h3><p>Following the passage and enactment on June 16, 2022 of The New York City Housing Authority (NYCHA) Public Housing Preservation Trust Act (NY State Bill A7805D/S9409A, referred to here as the "Trust Act"), NYCHA is working quickly to bring the Trust -- an entirely new legal entity -- into being. In order to ensure that current public housing residents are comfortable with the tenancy protections they will recieve after their developments of residents are transferred to the Trust (protections which are identical to those enjoyed under current NYCHA leases), residents must authorize such a transfer (or a transfer to any other program, including PACT, NYCHA's implementation of Rental Assistance Demonstration (RAD)) through a voting process.</p>
                <p>NYCHA is directed to finalize and distribute the rules by which such a vote will be held and processed within 120 days of passage. At present, the largest outstanding issue is that of representativeness: in order for a vote to be valid, how many residents at a given development must participate?</p>
                <p>Arriving at an appropriate threshold requires balancing multiple, often competing considerations. Among them:</p>
                <ul>
                    <li><strong>Statistical representativeness</strong> (i.e., securing a subset of voters large enough that their preferences can be assumed to represent those of the development as a whole)</li>
                    <li><strong>Apparent fairness</strong> (i.e., securing a large-enough group that most residents of a development view the vote outcome as legitimacy)</li>
                    <li><strong>Achievability</strong> (i.e., ensuring that any turnout requirement can reasonably be met in the context of NYCHA developments)</li>
                </ul>
                <p>This analysis is intended to determine what thresholds conform to the third factor: based on voter turnout in other scenarios, what share of residents can we reasonably expect to participate in a vote on whether to enter the Trust?</p>
                <h3 id="Representative-Output">Representative Output<a class="anchor-link" href="#Representative-Output">&#182;</a></h3><p>The deck below represents a typical deployment of this analysis, in the context of a working group devoted to elements of the Trust voting process. Slides and content, including GIS maps of NYCHA developments, are my own.</p>
                <div id="adobe-dc-view" style="height: 540px; width: 750px; margin-left: auto; margin-right: auto;"></div>
                <script src="https://documentservices.adobe.com/view-sdk/viewer.js"></script>
                <script type="text/javascript">
	document.addEventListener("adobe_dc_view_sdk.ready", function(){
		var adobeDCView = new AdobeDC.View({clientId: "03765142c6ee4fce867e44928bcdd626", divId: "adobe-dc-view"});
		adobeDCView.previewFile({
        content: { location: { url: '../content/Turnout_Slides_for_Website.pdf' } },
        metaData: { fileName: 'NYCHA_Voter_Turnout_Sample.pdf' },
      }, {embedMode: "SIZED_CONTAINER"});
	});
</script>

                <h3 id="Data-Sources">Data Sources<a class="anchor-link" href="#Data-Sources">&#182;</a></h3><p>Determining voter turnout rates at NYCHA developments in particular (as opposed to city-wide) for federal, state, and New York City municipal elections requires linking several data sources, as follows:</p>
                <ul>
                    <li><strong>Voter records</strong><ul>
                        <li>Provided by New York State Board of Elections in August 2022 under the Freedom of Information Law</li>
                        <li>Contains one line per voter record, uniquely identified by the SBOEID field, with other key fields including name and address components and a list of elections for which votes have been recorded</li>
                    </ul>
                    </li>
                    <p> </p>
                    <li><strong>Address records</strong><ul>
                        <li><em>Base dataset</em> -- a list of addresses associated with NYCHA stairhalls (i.e., residential building entrances) obtained from NYCHA's Data Warehouse. Used to produce a unique list of "BBL" values (Borough-Block-Lot, referring to NYC's system of unique parcel identifiers).</li>
                        <li><em>Citywide address guide</em> -- a system of tables identifying unique street addresses, street address ranges, and alternative address identifiers associated with each BBL value citywide. Used to enrich NYCHA's standard list of residential addresses with alternative identifiers that may be present in voter records (which rely on self-reported addresses).</li>
                    </ul>
                    </li>
                    <p> </p>
                    <li><strong>NYCHA official resident counts</strong><ul>
                        <li>Official counts of authorized NYCHA residents at each development, alongside a count of authorized residents at or over 18 years of age and therefore eligible to vote. Counts current as of August 2022.</li>
                    </ul>
                    </li>
                </ul>

                <p>Several other datasources, although not strictly necessary, are also used to either accelerate or enrich analysis of these primary sources.</p>
                <ul>
                    <li><strong>Geodata</strong><ul>
                        <li><em>NYCHA building and development footprints</em> -- Esri ShapeFiles containing footprints of NYCHA buildings, as well as the NYCHA developments that comprise them.</li>
                        <li><em>New York City electoral districts</em> -- geographic divisions containing several blocks that form the basis for all political districts (state, local, and federal) contained within New York City.</li>
                        <li><em>State, Federal, and Local political districts</em> -- district boundaries associated with the New York City Council, State Assembly, and U.S. House of Representatives.</li>
                    </ul>
                    </li>
                </ul>
                <h3 id="Overview-of-Methods">Overview of Methods<a class="anchor-link" href="#Overview-of-Methods">&#182;</a></h3><p>At the highest level, computing voter turnout (for any geography) follows a simple process:
                1) Working from a basic list of addresses and, optionally, geographic information, isolate addresses contained within the area of interest.
                2) Enrich the above address list with any and all alternative addresses corresponding to the same physical location, including those using alternative address numbers (when a location is represented by an address range) as well as those using alternative street identifiers.
                3) Using any scheme of choice, standardize addresses in the enriched address set and the relevant voter records to facilitate address matching.
                4) Match voter addresses to the list of enriched addresses representing the selected geographic area (in this analysis, matching on address components is used). Verify match quality as appropriate.
                5) Remove or merge duplicate voter records as appropriate
                6) Generate indicators for voters' presence or absence in each election of interest
                7) Using vote counts for each relevant election and a denominator of choice, compute turnout percentages.</p>
                <p>The following workflow implements this process for the above data sources, ultimately producing turnout as a percentage of registered voters for each election in BOE records and at each NYCHA development.</p>



							<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h3 id="Annotated-Analytical-Workflow">Annotated Analytical Workflow<a class="anchor-link" href="#Annotated-Analytical-Workflow">&#182;</a></h3>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">zipfile_deflate64</span> <span class="k">as</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">TextIOWrapper</span><span class="p">,</span> <span class="n">BytesIO</span>
<span class="kn">import</span> <span class="nn">regex</span> <span class="k">as</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">fuzzymatcher</span>
<span class="kn">import</span> <span class="nn">recordlinkage</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>

<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
<span class="n">tqdm</span><span class="o">.</span><span class="n">pandas</span><span class="p">()</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Load-and-process-voter-records">Load and process voter records<a class="anchor-link" href="#Load-and-process-voter-records">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">voters</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="s1">&#39;AllNYSVoters_20220711.zip&#39;</span><span class="p">)</span>
<span class="n">test_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">read_in_chunks</span><span class="p">(</span><span class="n">file_object</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Lazy function (generator) to read a file piece by piece.</span>
<span class="sd">    Default chunk size: 1k.&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">file_object</span><span class="o">.</span><span class="n">readlines</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">yield</span> <span class="n">data</span>


<span class="k">def</span> <span class="nf">process_csv_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span> <span class="n">filter_col</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">filter_list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">chunk_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>
    <span class="n">chunk_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">chunk_data</span><span class="p">)</span>

    <span class="n">interim_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">chunk_reader</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>

    <span class="c1">#Create NYC Electoral District number by appending Assembly Dist. and Electoral Dist. fields</span>
    <span class="n">interim_df</span><span class="p">[</span><span class="s1">&#39;FULL_ED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interim_df</span><span class="p">[</span><span class="s1">&#39;AD&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">interim_df</span><span class="p">[</span><span class="s1">&#39;ED&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">filter_col</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">interim_df</span> <span class="o">=</span> <span class="n">interim_df</span><span class="p">[</span><span class="n">interim_df</span><span class="p">[</span><span class="n">filter_col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">filter_list</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">interim_df</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="For-ease-of-additional-processing,-discard-all-voter-records-that-do-not-correspond-to-electoral-districts-that-contain,-in-part-or-whole,-NYCHA-developments">For ease of additional processing, discard all voter records that do not correspond to electoral districts that contain, in part or whole, NYCHA developments<a class="anchor-link" href="#For-ease-of-additional-processing,-discard-all-voter-records-that-do-not-correspond-to-electoral-districts-that-contain,-in-part-or-whole,-NYCHA-developments">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Columns entered manually from data dictionary packaged with voter file</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;LASTNAME&#39;</span><span class="p">,</span><span class="s1">&#39;FIRSTNAME&#39;</span><span class="p">,</span><span class="s1">&#39;MIDDLENAME&#39;</span><span class="p">,</span><span class="s1">&#39;NAMESUFFIX&#39;</span><span class="p">,</span>
        <span class="s1">&#39;RADDNUMBER&#39;</span><span class="p">,</span><span class="s1">&#39;RHALFCODE&#39;</span><span class="p">,</span><span class="s1">&#39;RPREDIRECTION&#39;</span><span class="p">,</span><span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">,</span>
        <span class="s1">&#39;RPOSTDIRECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;RAPARTMENTTYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RAPARTMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;RADDRNONSTD&#39;</span><span class="p">,</span><span class="s1">&#39;RCITY&#39;</span><span class="p">,</span><span class="s1">&#39;RZIP5&#39;</span><span class="p">,</span><span class="s1">&#39;RZIP4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;MAILADD1&#39;</span><span class="p">,</span><span class="s1">&#39;MAILADD2&#39;</span><span class="p">,</span><span class="s1">&#39;MAILADD3&#39;</span><span class="p">,</span><span class="s1">&#39;MAILADD4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DOB&#39;</span><span class="p">,</span><span class="s1">&#39;GENDER&#39;</span><span class="p">,</span><span class="s1">&#39;ENROLLMENT&#39;</span><span class="p">,</span><span class="s1">&#39;OTHERPARTY&#39;</span><span class="p">,</span>
        <span class="s1">&#39;COUNTYCODE&#39;</span><span class="p">,</span><span class="s1">&#39;ED&#39;</span><span class="p">,</span><span class="s1">&#39;LD&#39;</span><span class="p">,</span><span class="s1">&#39;TOWNCITY&#39;</span><span class="p">,</span><span class="s1">&#39;WARD&#39;</span><span class="p">,</span><span class="s1">&#39;CD&#39;</span><span class="p">,</span><span class="s1">&#39;SD&#39;</span><span class="p">,</span><span class="s1">&#39;AD&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LASTVOTEDDATE&#39;</span><span class="p">,</span><span class="s1">&#39;PREVYEARVOTED&#39;</span><span class="p">,</span><span class="s1">&#39;PREVCOUNTY&#39;</span><span class="p">,</span><span class="s1">&#39;PREVADDRESS&#39;</span><span class="p">,</span><span class="s1">&#39;PREVNAME&#39;</span><span class="p">,</span>
        <span class="s1">&#39;COUNTYVRNUMBER&#39;</span><span class="p">,</span><span class="s1">&#39;REGDATE&#39;</span><span class="p">,</span><span class="s1">&#39;VRSOURCE&#39;</span><span class="p">,</span><span class="s1">&#39;IDREQUIRED&#39;</span><span class="p">,</span><span class="s1">&#39;IDMET&#39;</span><span class="p">,</span>
        <span class="s1">&#39;STATUS&#39;</span><span class="p">,</span><span class="s1">&#39;REASONCODE&#39;</span><span class="p">,</span><span class="s1">&#39;INACT_DATE&#39;</span><span class="p">,</span><span class="s1">&#39;PURGE_DATE&#39;</span><span class="p">,</span><span class="s1">&#39;SBOEID&#39;</span><span class="p">,</span><span class="s1">&#39;VoterHistory&#39;</span><span class="p">]</span>

<span class="c1">#List of NYCHA electoral districts obtained using QGIS, by intersection of NYCHA developments layer</span>
<span class="c1">#with ED layer, and converted to string for use in filtering. Read in NYCHA election districts from various </span>
<span class="c1">#versions of the district shapefile (21D through 22A2) to account for shifting district lines </span>
<span class="c1">#post-redistricting and lag in SBOE data updates</span>

<span class="c1">#In dataset, field &#39;FULL_ED&#39; is obtained by concatenating assembly district and local ED (zero-padded </span>
<span class="c1">#to three characters)</span>


<span class="n">filelist</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;2022_EDs/*.xlsx&#39;</span><span class="p">)</span>

<span class="n">distlist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">filelist</span><span class="p">:</span>
    <span class="n">newlist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="n">distlist</span> <span class="o">=</span> <span class="n">distlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newlist</span><span class="p">)</span>

<span class="n">nycha_distlist_2022</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">distlist</span><span class="p">[</span><span class="s1">&#39;ElectDist&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

<span class="c1">#If isolating all NYC registered voters for purposes of comparison, the appropriate filter column</span>
<span class="c1">#is COUNTYCODE, and the appropriate filter set is:</span>
<span class="n">nyc_counties</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;31&#39;</span><span class="p">,</span> <span class="s1">&#39;24&#39;</span><span class="p">,</span> <span class="s1">&#39;41&#39;</span><span class="p">,</span> <span class="s1">&#39;03&#39;</span><span class="p">,</span> <span class="s1">&#39;43&#39;</span><span class="p">])</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">voters</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;AllNYSVoters_20220711.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_handle</span><span class="p">:</span>
    <span class="c1">#cols_line = file_handle.readline().decode(&#39;utf-8&#39;)</span>
    <span class="c1">#cols = [re.sub(r&#39;[\s\&#39;\&quot;]+&#39;,&#39;&#39;,col).strip() for col in cols_line.split(&#39;,&#39;)]</span>
    <span class="c1">#print(cols)</span>
    <span class="n">base_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">0</span>

    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">read_in_chunks</span><span class="p">(</span><span class="n">file_handle</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">10000000</span><span class="p">)):</span>
        <span class="n">n</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">n</span><span class="o">%</span><span class="k">20</span> == 0:
            <span class="k">if</span> <span class="n">base_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">base_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;clean_segments/iter_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s1">.json&#39;</span><span class="p">)</span>
                <span class="n">base_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>

        <span class="n">base_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">base_df</span><span class="p">,</span> <span class="n">process_csv_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">filter_col</span><span class="o">=</span><span class="s1">&#39;FULL_ED&#39;</span><span class="p">,</span> <span class="n">filter_list</span> <span class="o">=</span> <span class="n">nycha_distlist_2022</span><span class="p">)],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1">#To account for remaining rows after last output</span>
    <span class="n">base_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;clean_segments/iter_FINAL.json&#39;</span><span class="p">)</span>

</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">caches</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">iglob</span><span class="p">(</span><span class="s1">&#39;clean_segments/*&#39;</span><span class="p">)</span>

<span class="n">full_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">caches</span><span class="p">):</span>
    <span class="n">segment_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="n">full_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">full_df</span><span class="p">,</span> <span class="n">segment_df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Clean-and-convert-various-fields:">Clean and convert various fields:<a class="anchor-link" href="#Clean-and-convert-various-fields:">&#182;</a></h4><ul>
            <li>BOROUGH: convert COUNTYCODE contained in voter file to NYC borough</li>
            <li>RADDNUMBER, RSTREETNAME, BOROUGH: convert to string and remove whitespace</li>
            <li>MOD_ADDRESS: combine address number, street prefixes, street names, and boroughs into a unique address identifier</li>
        </ul>

        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">county_to_borough_dict</span> <span class="o">=</span> <span class="p">{</span><span class="mi">31</span><span class="p">:</span> <span class="s1">&#39;MANHATTAN&#39;</span><span class="p">,</span>
                          <span class="mi">24</span><span class="p">:</span> <span class="s1">&#39;BROOKLYN&#39;</span><span class="p">,</span>
                          <span class="mi">41</span><span class="p">:</span> <span class="s1">&#39;QUEENS&#39;</span><span class="p">,</span>
                          <span class="mi">3</span><span class="p">:</span>  <span class="s1">&#39;BRONX&#39;</span><span class="p">,</span>
                          <span class="mi">43</span><span class="p">:</span> <span class="s1">&#39;STATEN ISLAND&#39;</span><span class="p">}</span>
<span class="n">full_df</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_df</span><span class="p">[</span><span class="s1">&#39;COUNTYCODE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">county_to_borough_dict</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;RADDNUMBER&#39;</span><span class="p">,</span><span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">,</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]:</span>
    <span class="n">full_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">get_mod_address_from_row</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">address_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;RADDNUMBER&#39;</span><span class="p">,</span><span class="s1">&#39;RPREDIRECTION&#39;</span><span class="p">,</span><span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">,</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="s1">&#39;RPREDIRECTION&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">col</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;nan&#39;</span><span class="p">:</span>
                    <span class="n">address_string</span> <span class="o">=</span> <span class="n">address_string</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">col</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">address_string</span> <span class="o">=</span> <span class="n">address_string</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">col</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">]:</span>
                <span class="n">address_string</span> <span class="o">=</span> <span class="n">address_string</span><span class="o">+</span><span class="s1">&#39;, &#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">address_string</span> <span class="o">=</span> <span class="n">address_string</span><span class="o">+</span><span class="s1">&#39; &#39;</span>

    <span class="k">return</span><span class="p">(</span><span class="n">address_string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;, NY&#39;</span><span class="p">)</span>

<span class="n">full_df</span><span class="p">[</span><span class="s1">&#39;MOD_ADDRESS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_df</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">get_mod_address_from_row</span><span class="p">(</span><span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Write-out-to-CSV-for-flexible-workflow">Write out to CSV for flexible workflow<a class="anchor-link" href="#Write-out-to-CSV-for-flexible-workflow">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_DISTRICT_RECORDS_2022.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Locate-full-NYCHA-address-range-from-BBL">Locate full NYCHA address range from BBL<a class="anchor-link" href="#Locate-full-NYCHA-address-range-from-BBL">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#The following files and associated documentation are found at:</span>
<span class="c1">#https://www1.nyc.gov/site/planning/data-maps/open-data.page#pad</span>
<span class="c1">#If direct link fails, search &quot;Property Address Directory&quot; on linked page</span>

<span class="n">bbl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;pad22a/bobabbl.txt&#39;</span><span class="p">)</span>
<span class="n">addr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;pad22a/bobaadr.txt&#39;</span><span class="p">)</span>
<span class="n">snd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s1">&#39;pad22a/snd22Acow.txt&#39;</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">92</span><span class="p">])</span>
<span class="n">snd</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rectype&#39;</span><span class="p">,</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;stname&#39;</span><span class="p">,</span><span class="s1">&#39;primary_flag&#39;</span><span class="p">,</span><span class="s1">&#39;principal_flag&#39;</span><span class="p">,</span><span class="s1">&#39;boro1&#39;</span><span class="p">,</span><span class="s1">&#39;sc5&#39;</span><span class="p">,</span><span class="s1">&#39;lgc&#39;</span><span class="p">,</span><span class="s1">&#39;spv&#39;</span><span class="p">,</span><span class="s1">&#39;filler&#39;</span><span class="p">,</span><span class="s1">&#39;numeric_ind&#39;</span><span class="p">,</span><span class="s1">&#39;GFT&#39;</span><span class="p">,</span><span class="s1">&#39;len_full_name&#39;</span><span class="p">,</span><span class="s1">&#39;full_stname&#39;</span><span class="p">,</span><span class="s1">&#39;min_SNL&#39;</span><span class="p">,</span><span class="s1">&#39;stn20&#39;</span><span class="p">,</span><span class="s1">&#39;ht_name_type_code&#39;</span><span class="p">,</span><span class="s1">&#39;filler&#39;</span><span class="p">]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#bl_guide: contains official NYCHA stairhall addresses and associated BBL values</span>
<span class="n">bl_guide</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;stairhalls.csv&#39;</span><span class="p">)</span>
<span class="n">bl_guide</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">bl_guide</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">boro_num_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;MANHATTAN&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;BRONX&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;BROOKLYN&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;QUEENS&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;STATEN ISLAND&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">bl_guide</span><span class="p">[</span><span class="s1">&#39;BORO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bl_guide</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">boro_num_dict</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
<span class="n">bl_guide</span><span class="p">[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bl_guide</span><span class="p">[</span><span class="s1">&#39;LOCATION&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Match building BBLs to Property Address Directory BBL table</span>
<span class="n">nycha_bbl</span> <span class="o">=</span> <span class="n">bbl</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">bl_guide</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">,</span><span class="s1">&#39;lot&#39;</span><span class="p">],</span> <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;BORO&#39;</span><span class="p">,</span><span class="s1">&#39;BLOCK&#39;</span><span class="p">,</span><span class="s1">&#39;LOT&#39;</span><span class="p">],</span> <span class="n">indicator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">nycha_bbl</span> <span class="o">=</span> <span class="n">nycha_bbl</span><span class="p">[</span><span class="n">nycha_bbl</span><span class="p">[</span><span class="s1">&#39;_merge&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span><span class="p">]</span>
<span class="n">nycha_bbl</span> <span class="o">=</span> <span class="n">nycha_bbl</span><span class="p">[[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">,</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">,</span><span class="s1">&#39;lot&#39;</span><span class="p">,</span><span class="s1">&#39;numaddr&#39;</span><span class="p">,</span> <span class="s1">&#39;numbf&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Merge NYCHA BBLs one-to-many to PAD address table</span>
<span class="n">nycha_addr</span> <span class="o">=</span> <span class="n">nycha_bbl</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">,</span><span class="s1">&#39;lot&#39;</span><span class="p">])</span>
<span class="n">nycha_addr</span> <span class="o">=</span> <span class="n">nycha_addr</span><span class="p">[</span><span class="n">nycha_addr</span><span class="p">[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="ow">not</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
<span class="n">nycha_addr</span> <span class="o">=</span> <span class="n">nycha_addr</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;sc5&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Screen out invalid address numbers/address ranges (those with GARAGE, etc.)</span>

<span class="k">def</span> <span class="nf">is_valid_address_number</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="n">test_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">test_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="n">nycha_addr_ranges</span> <span class="o">=</span> <span class="n">nycha_addr</span><span class="p">[</span><span class="n">nycha_addr</span><span class="p">[</span><span class="s1">&#39;lhnd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">is_valid_address_number</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
<span class="n">nycha_addr_ranges</span> <span class="o">=</span> <span class="n">nycha_addr_ranges</span><span class="p">[[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">,</span><span class="s1">&#39;boro&#39;</span><span class="p">,</span><span class="s1">&#39;block&#39;</span><span class="p">,</span><span class="s1">&#39;lot&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;lhnd&#39;</span><span class="p">,</span><span class="s1">&#39;lsos&#39;</span><span class="p">,</span><span class="s1">&#39;hhnd&#39;</span><span class="p">,</span><span class="s1">&#39;hsos&#39;</span><span class="p">,</span><span class="s1">&#39;parity&#39;</span><span class="p">,</span> <span class="s1">&#39;stname_x&#39;</span><span class="p">,</span> <span class="s1">&#39;stname_y&#39;</span><span class="p">,</span><span class="s1">&#39;addrtype&#39;</span><span class="p">,</span><span class="s1">&#39;GFT&#39;</span><span class="p">]]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create unique row for each address number in matching address ranges</span>

<span class="k">def</span> <span class="nf">expand_address_range</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;lhnd&#39;</span><span class="p">])</span>
    <span class="n">end</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;hhnd&#39;</span><span class="p">])</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">parity</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;parity&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">parity</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">row</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">address_range</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

    <span class="n">expanded_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">row</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">address_range</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">RangeIndex</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_range</span><span class="p">)))</span>
    <span class="n">expanded_df</span><span class="p">[</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">address_range</span><span class="p">)):</span>
        <span class="n">expanded_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">address_range</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">return</span><span class="p">(</span><span class="n">expanded_df</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_addresses_expanded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">nycha_addr_ranges</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
    <span class="n">nycha_addresses_expanded</span> <span class="o">=</span> <span class="n">nycha_addresses_expanded</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expand_address_range</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Add borough names and standardize addresses</span>
<span class="n">boro_num_to_name_dict</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;MANHATTAN&#39;</span><span class="p">,</span>
                         <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;BRONX&#39;</span><span class="p">,</span>
                         <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;BROOKLYN&#39;</span><span class="p">,</span>
                         <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;QUEENS&#39;</span><span class="p">,</span>
                         <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;STATEN ISLAND&#39;</span><span class="p">}</span>

<span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;boro&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">boro_num_to_name_dict</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
<span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;stname_y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;=[\d]+)((TH)|(RD)|(ST)|(ND))&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
<span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;FULL_ADD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="n">nycha_addresses_expanded</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, NY&#39;</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">nycha_addresses_expanded</span><span class="p">[[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">,</span> <span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">,</span> <span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">,</span> <span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span> <span class="s1">&#39;FULL_ADD&#39;</span><span class="p">]]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Adding-official-NYCHA-addresses-to-list,-if-not-already-contained">Adding official NYCHA addresses to list, if not already contained<a class="anchor-link" href="#Adding-official-NYCHA-addresses-to-list,-if-not-already-contained">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Supplement with NYCHA addresses from PTAD shapefile (which lacks many intermediate address nums)</span>
<span class="n">nycha_addr_official</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;STD_NYCHA/NYCHA_Address_Points.geojson&#39;</span><span class="p">)</span>
<span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;STREET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;=[\d]+)((TH)|(RD)|(ST)|(ND))&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
<span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;FULL_ADD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="n">nycha_addr_official</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;, NY&#39;</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nycha_addr_official</span><span class="p">[[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">,</span> <span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">,</span> <span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">,</span> <span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span> <span class="s1">&#39;FULL_ADD&#39;</span><span class="p">]])</span>

<span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">,</span> <span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">,</span> <span class="s1">&#39;BOROUGH&#39;</span><span class="p">])</span>
<span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Manually-adjusting-select-addresses">Manually adjusting select addresses<a class="anchor-link" href="#Manually-adjusting-select-addresses">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Add St. Nicholas Ave addresses</span>
<span class="n">stn_ave_addr</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;SAINT NICHOLAS&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">stn_ave_addr</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ST NICHOLAS AVENUE&#39;</span>

<span class="c1">#Add 7th Ave addresses</span>
<span class="n">seventh_ave_addr</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;POWELL BOULEVARD&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">acp_addr</span> <span class="o">=</span> <span class="n">seventh_ave_addr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">seventh_ave_addr</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;7 AVENUE&#39;</span>
<span class="n">acp_addr</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ADAM CLAYTON POWELL BOULEVARD&#39;</span>

<span class="c1">#Add 8th Ave addresses</span>
<span class="n">eighth_ave_addr</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;FREDERICK DOUGLASS&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">eighth_ave_addr</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;8 AVENUE&#39;</span>

<span class="c1">#Misc...</span>
<span class="n">w27</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;WEST 27 DRIVE&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">w27</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;WEST 27 STREET DRIVE&#39;</span>

<span class="n">ua1</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;UNIVERSITY AVENUE&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ua2</span> <span class="o">=</span> <span class="n">ua1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ua1</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;DR MARTIN L KING JR BOULEVARD&#39;</span>
<span class="n">ua2</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span><span class="s1">&#39;DR M L KING JR BOULEVARD&#39;</span>

<span class="n">gb</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;GUY BREWER&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">gb</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;GUY R BREWER BOULEVARD&#39;</span>

<span class="n">ftw</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;FORT WASHINGTON&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ftw</span><span class="p">[</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;FT WASHINGTON AVENUE&#39;</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Put it all together...</span>
<span class="n">new_addr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="p">[</span><span class="n">stn_ave_addr</span><span class="p">,</span> <span class="n">seventh_ave_addr</span><span class="p">,</span> <span class="n">acp_addr</span><span class="p">,</span> <span class="n">eighth_ave_addr</span><span class="p">,</span> <span class="n">w27</span><span class="p">,</span> <span class="n">ua1</span><span class="p">,</span> <span class="n">ua2</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">ftw</span><span class="p">]:</span>
    <span class="n">new_addr</span> <span class="o">=</span> <span class="n">new_addr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_addr</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_addr_full_OFFICIAL_PLUS_BBL.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Match-voter-file-addresses-and-NYCHA-addresses-to-isolate-NYCHA-voters">Match voter file addresses and NYCHA addresses to isolate NYCHA voters<a class="anchor-link" href="#Match-voter-file-addresses-and-NYCHA-addresses-to-isolate-NYCHA-voters">&#182;</a></h4>
        </div>
        </div>
    </div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Reload-datasets-produced-above">Reload datasets produced above<a class="anchor-link" href="#Reload-datasets-produced-above">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Load voter records from NYCHA electoral districts isolated above, alongside addresses</span>
<span class="n">nycha_addr_full</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_addr_full_OFFICIAL_PLUS_BBL.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

<span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_addr_full</span><span class="p">[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">full_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_DISTRICT_RECORDS_2022.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;RADDNUMBER&#39;</span><span class="p">,</span> <span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;BOROUGH&#39;</span><span class="p">]:</span>
    <span class="n">full_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Set-up-index-using-Record-Linkage-Toolkit">Set up index using Record Linkage Toolkit<a class="anchor-link" href="#Set-up-index-using-Record-Linkage-Toolkit">&#182;</a></h4><p>Here, match exactly on Borough and Address number, while allowing minor variations in street spellings</p>

        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">indexer</span> <span class="o">=</span> <span class="n">recordlinkage</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
<span class="n">indexer</span><span class="o">.</span><span class="n">block</span><span class="p">(</span><span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span><span class="s1">&#39;RADDNUMBER&#39;</span><span class="p">],</span> <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span><span class="s1">&#39;HOUSE_NUM&#39;</span><span class="p">])</span>

<span class="n">candidates</span> <span class="o">=</span> <span class="n">indexer</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">full_df</span><span class="p">,</span> <span class="n">nycha_addr_full</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">compare</span> <span class="o">=</span> <span class="n">recordlinkage</span><span class="o">.</span><span class="n">Compare</span><span class="p">()</span>

<span class="n">compare</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="s1">&#39;RSTREETNAME&#39;</span><span class="p">,</span><span class="s1">&#39;STREET_NAME_STD&#39;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;STREET_NAME&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Obtain-matching-records">Obtain matching records<a class="anchor-link" href="#Obtain-matching-records">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Obtain matching index pairs</span>
<span class="n">features</span> <span class="o">=</span> <span class="n">compare</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">full_df</span><span class="p">,</span> <span class="n">nycha_addr_full</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">features</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Fetch information on matches for validation</span>
<span class="n">match_candidates</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;FULL_DF_MOD_ADDRESS&#39;</span><span class="p">:[],</span> <span class="s1">&#39;NYCHA_ADDRESSES_FULL_ADD&#39;</span><span class="p">:[],</span> <span class="s1">&#39;FULL_DF_IND&#39;</span><span class="p">:[],</span> <span class="s1">&#39;NYCHA_ADDRESS_IND&#39;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">features</span><span class="p">[</span><span class="n">features</span><span class="p">[</span><span class="s1">&#39;STREET_NAME&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
    <span class="n">row_values</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">full_add_ind</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_values</span><span class="p">[</span><span class="s1">&#39;level_0&#39;</span><span class="p">])</span>
    <span class="n">nycha_add_ind</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row_values</span><span class="p">[</span><span class="s1">&#39;level_1&#39;</span><span class="p">])</span>

    <span class="n">match_candidates</span><span class="p">[</span><span class="s1">&#39;FULL_DF_MOD_ADDRESS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">full_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">full_add_ind</span><span class="p">][</span><span class="s1">&#39;MOD_ADDRESS&#39;</span><span class="p">])</span>
    <span class="n">match_candidates</span><span class="p">[</span><span class="s1">&#39;FULL_DF_IND&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">full_add_ind</span><span class="p">)</span>
    <span class="n">match_candidates</span><span class="p">[</span><span class="s1">&#39;NYCHA_ADDRESSES_FULL_ADD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nycha_addr_full</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">nycha_add_ind</span><span class="p">][</span><span class="s1">&#39;FULL_ADD&#39;</span><span class="p">])</span>
    <span class="n">match_candidates</span><span class="p">[</span><span class="s1">&#39;NYCHA_ADDRESS_IND&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nycha_add_ind</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">match_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">match_candidates</span><span class="p">)</span>
<span class="n">match_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;_match_candidates_2022.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">match_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_match_candidates_2022.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Identify matched rows in voter file</span>
<span class="n">matched_voter_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;FULL_DF_IND&#39;</span><span class="p">])</span>

<span class="n">full_df_ind</span> <span class="o">=</span> <span class="n">full_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">full_df_ind</span><span class="p">[</span><span class="s1">&#39;_match&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matched_voter_indices</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">match_mapper</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">match_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
    <span class="n">row_data</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">match_mapper</span><span class="p">[</span><span class="n">row_data</span><span class="p">[</span><span class="s1">&#39;FULL_DF_IND&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">row_data</span><span class="p">[</span><span class="s1">&#39;NYCHA_ADDRESS_IND&#39;</span><span class="p">]</span>

</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Add-NYCHA-development-information-to-matched-addresses">Add NYCHA development information to matched addresses<a class="anchor-link" href="#Add-NYCHA-development-information-to-matched-addresses">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_matched_dev_info</span><span class="p">(</span><span class="n">base_df</span><span class="p">,</span> <span class="n">mapper</span><span class="p">,</span> <span class="n">supp_df</span><span class="p">):</span>
    <span class="n">supp_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;VOTER_IND&#39;</span><span class="p">:[],</span> <span class="s1">&#39;NYCHA_IND&#39;</span><span class="p">:[],</span> <span class="s1">&#39;TDS&#39;</span><span class="p">:[],</span> <span class="s1">&#39;NYCHA_ADD&#39;</span><span class="p">:[]}</span>

    <span class="n">matched_df</span> <span class="o">=</span> <span class="n">base_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">matched_df</span> <span class="o">=</span> <span class="n">matched_df</span><span class="p">[</span><span class="n">matched_df</span><span class="p">[</span><span class="s1">&#39;_match&#39;</span><span class="p">]]</span>

    <span class="n">matched_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">matched_df</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span>
    <span class="n">unmatched_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">base_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">-</span><span class="n">matched_set</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">matched_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
            <span class="n">supp_ind</span> <span class="o">=</span> <span class="n">mapper</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">matching_row</span> <span class="o">=</span> <span class="n">supp_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">supp_ind</span><span class="p">]</span>

            <span class="n">supp_dict</span><span class="p">[</span><span class="s1">&#39;VOTER_IND&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="n">supp_dict</span><span class="p">[</span><span class="s1">&#39;NYCHA_IND&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">supp_ind</span><span class="p">)</span>
            <span class="n">supp_dict</span><span class="p">[</span><span class="s1">&#39;TDS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matching_row</span><span class="p">[</span><span class="s1">&#39;TDS_NUM&#39;</span><span class="p">])</span>
            <span class="n">supp_dict</span><span class="p">[</span><span class="s1">&#39;NYCHA_ADD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matching_row</span><span class="p">[</span><span class="s1">&#39;FULL_ADD&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">unmatched_set</span><span class="p">:</span>
        <span class="n">supp_dict</span><span class="p">[</span><span class="s1">&#39;VOTER_IND&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;NYCHA_IND&#39;</span><span class="p">,</span><span class="s1">&#39;TDS&#39;</span><span class="p">,</span><span class="s1">&#39;NYCHA_ADD&#39;</span><span class="p">]:</span>
            <span class="n">supp_dict</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">supp_dict</span>

<span class="n">supp_nycha_info</span> <span class="o">=</span> <span class="n">get_matched_dev_info</span><span class="p">(</span><span class="n">full_df_ind</span><span class="p">,</span> <span class="n">match_mapper</span><span class="p">,</span> <span class="n">nycha_addr_full</span><span class="p">)</span>
<span class="n">supp_nycha_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">supp_nycha_info</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">full_df_supp</span> <span class="o">=</span> <span class="n">full_df_ind</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">supp_nycha_df</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_on</span> <span class="o">=</span> <span class="s1">&#39;VOTER_IND&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">full_df_supp</span><span class="p">[</span><span class="n">full_df_supp</span><span class="p">[</span><span class="s1">&#39;_match&#39;</span><span class="p">]]</span>
<span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;Unnamed&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">])</span>
<span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_voter_set_strict.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h4 id="Expand-elections-field-to-arrive-at-turnout-rates-by-election">Expand elections field to arrive at turnout rates by election<a class="anchor-link" href="#Expand-elections-field-to-arrive-at-turnout-rates-by-election">&#182;</a></h4>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;NYCHA_voter_set_strict.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#Remove purged voter records</span>
<span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[</span><span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;STATUS&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;P&#39;</span><span class="p">]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;ElecList&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;VoterHistory&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">set</span><span class="p">([</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\(\w+\)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)]))</span>
<span class="c1">#nycha_voter_set[&#39;ElecList&#39;] = nycha_voter_set[&#39;VoterHistory&#39;].apply(lambda x: set(name.strip() for name in str(x).split(&#39;;&#39;)))</span>

<span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[[</span><span class="s1">&#39;LASTNAME&#39;</span><span class="p">,</span><span class="s1">&#39;FIRSTNAME&#39;</span><span class="p">,</span><span class="s1">&#39;FULL_ED&#39;</span><span class="p">,</span><span class="s1">&#39;LD&#39;</span><span class="p">,</span><span class="s1">&#39;CD&#39;</span><span class="p">,</span><span class="s1">&#39;SD&#39;</span><span class="p">,</span><span class="s1">&#39;AD&#39;</span><span class="p">,</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span><span class="s1">&#39;TDS&#39;</span><span class="p">,</span><span class="s1">&#39;ElecList&#39;</span><span class="p">]]</span>
<span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;_counter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Add city council district info by ED</span>
<span class="n">ed_to_council</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ED22A1_to_Council_District.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;ElectDist&#39;</span><span class="p">)</span>
<span class="n">error_eds</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1">#@njit</span>
<span class="k">def</span> <span class="nf">get_cd</span><span class="p">(</span><span class="n">ed_num</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cd_num</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ed_num</span><span class="p">][</span><span class="s1">&#39;coun_dist&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">cd_num</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="n">error_eds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ed_num</span><span class="p">)</span>


<span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;Council_Dist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;FULL_ED&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_cd</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">ed_to_council</span><span class="p">))</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Group election identifiers and define election types</span>
<span class="n">ID_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;2007GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20071106 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20071105 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20071106 ??&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2007&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2007&#39;</span><span class="p">,</span> <span class="s1">&#39;2007 GENERAL  ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;2007 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;2007 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2007&#39;</span><span class="p">,</span> <span class="s1">&#39;07 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20071006 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2007&#39;</span><span class="p">,</span> <span class="s1">&#39;2007 GENERAL&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2007PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20070918 PR&#39;</span><span class="p">,</span><span class="s1">&#39;PRIMARY ELECTION 2007&#39;</span><span class="p">,</span> <span class="s1">&#39;2007 Primary Election&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2007SP&#39;</span><span class="p">:[</span><span class="s1">&#39;Special Election 2007&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2008GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20081104 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2008&#39;</span><span class="p">,</span><span class="s1">&#39;General Election, 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;20081104 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20081114 PR&#39;</span><span class="p">,</span><span class="s1">&#39;20081111 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 General&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;20081028 GE&#39;</span><span class="p">,</span><span class="s1">&#39;20080909 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20081110 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20081104&#39;</span><span class="p">,</span> <span class="s1">&#39;20081120&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2008PP&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;200802`0 PP&#39;</span><span class="p">,</span><span class="s1">&#39;08 PRESIDENTIAL PRIMARY&#39;</span><span class="p">,</span><span class="s1">&#39;20080205 PP&#39;</span><span class="p">,</span> <span class="s1">&#39;20080205 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESIDENTIAL PRIMARY 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 PRESIDENTIAL PRIMARY&#39;</span><span class="p">,</span> <span class="s1">&#39;20080205 ??&#39;</span><span class="p">,</span> <span class="s1">&#39;Presidential Primary, 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 Presidential Primary&#39;</span><span class="p">,</span> <span class="s1">&#39;Presidential Primary 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 Presidential Primary Election&#39;</span><span class="p">,</span> <span class="s1">&#39;20080205 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2008PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20080909 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080909 PP&#39;</span><span class="p">,</span> <span class="s1">&#39;20080911 PR&#39;</span><span class="p">,</span><span class="s1">&#39;20080903 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080902 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080916 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080914 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080913 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20080914&#39;</span><span class="p">,</span> <span class="s1">&#39;20080909 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;20080912 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20091103 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20091103&#39;</span><span class="p">,</span> <span class="s1">&#39;2009 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;2009 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;20091103 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;20091103 SP&#39;</span><span class="p">])</span> <span class="p">,</span>
           <span class="s1">&#39;2009RO&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20090929 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;20090930 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;20090929 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;20090929 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20090929 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20090929 Run Off&#39;</span><span class="p">,</span> <span class="s1">&#39;20090930 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20090922 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;20090928 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;2009 PRIMARY ELECTION&#39;</span><span class="p">,</span><span class="s1">&#39;09 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20090915 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;Primary Election, 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;20090915 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20091015 PR&#39;</span><span class="p">,</span><span class="s1">&#39;20090915 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;20090908 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009SP_0915&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20090915 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009SP_0606&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20090602 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009SP_0421&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20090421 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2009SP_0224&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20090224 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2010GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20101103 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;10 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20101102 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20101102&#39;</span><span class="p">,</span> <span class="s1">&#39;2010 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2010&#39;</span><span class="p">,</span> <span class="s1">&#39;2010 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2010&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2010&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2010&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2010PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;Primary Election, 2010&#39;</span><span class="p">,</span> <span class="s1">&#39;10 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20100914 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;2010 Primary Election&#39;</span><span class="p">,</span> <span class="s1">&#39;2010 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2010&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2010SP_0323&#39;</span><span class="p">:[</span><span class="s1">&#39;20100323 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2010SP_0316&#39;</span><span class="p">:[</span><span class="s1">&#39;20100316 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2010SP_0209&#39;</span><span class="p">:[</span><span class="s1">&#39;20100209 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2011GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20111105 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20111108 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;2011 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;2011 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;20111106 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;11 GENERAL  ELECTION&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2011PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PR 20110913&#39;</span><span class="p">,</span> <span class="s1">&#39;2011 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY ELECTION 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;20110913 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;2011 Primary Election&#39;</span><span class="p">,</span> <span class="s1">&#39;11 PRIMARY ELECTION&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2011SP_0913&#39;</span><span class="p">:[</span><span class="s1">&#39;20110913 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;2011 Special Election 26CD&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2012GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20121106 GE&#39;</span><span class="p">,</span><span class="s1">&#39;2012 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2012&#39;</span><span class="p">,</span> <span class="s1">&#39;2012 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2012&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2012&#39;</span><span class="p">,</span> <span class="s1">&#39;12 GENERAL  ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2012&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20121106&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2012PR_0913&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20120913 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2012PR_0620&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20120626 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;2012 PRIMARY ELECTION FEDERAL&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2012PP&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20120424 PP&#39;</span><span class="p">,</span><span class="s1">&#39;2012 Presidential Primary&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2012SP_0320&#39;</span><span class="p">:[</span><span class="s1">&#39;20120320 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2013GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GE 20131105&#39;</span><span class="p">,</span> <span class="s1">&#39;2013 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2013 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;13 GENERAL  ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;20131105 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2013PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;13 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20130910&#39;</span><span class="p">,</span> <span class="s1">&#39;20131001 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2013 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;Primary Election, 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2013 Primary Election&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY ELECTION 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;20130910 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20130910 RO&#39;</span><span class="p">,</span><span class="s1">&#39;20130901 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2013RO&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20131001 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;RO 20131001&#39;</span><span class="p">,</span> <span class="s1">&#39;20131001 PP&#39;</span><span class="p">,</span><span class="s1">&#39;20130110&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2013SP_0219&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20130219 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;20130219 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2014GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;2014 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2014&#39;</span><span class="p">,</span> <span class="s1">&#39;20141104 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20141104&#39;</span><span class="p">,</span> <span class="s1">&#39;2014  GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;2014 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2014&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2014&#39;</span><span class="p">,</span> <span class="s1">&#39;14 GENERAL  ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2014&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2014PR_0909&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20140909 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20140909&#39;</span><span class="p">,</span> <span class="s1">&#39;2014 PRIMARY STATE and LOCAL&#39;</span><span class="p">,</span> <span class="s1">&#39;2014 Primary Election (State &amp; Local)&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2014PR_0624&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20140624 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20140624&#39;</span><span class="p">,</span> <span class="s1">&#39;2014CONGRESSIONAL PRIMARY&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2015GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GE 20151103&#39;</span><span class="p">,</span> <span class="s1">&#39;2015 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;2015  GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2015&#39;</span><span class="p">,</span> <span class="s1">&#39;20151108 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;2015 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2015&#39;</span><span class="p">,</span> <span class="s1">&#39;15 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20151103 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2015PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;2015 Primary Election&#39;</span><span class="p">,</span> <span class="s1">&#39;20150910 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2015&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2015SP_0505&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20150505 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 20150505&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2016GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20161108 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20161108 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20161108 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20161108&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;16 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 General&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;20161107 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;20081104&#39;</span><span class="p">,</span> <span class="s1">&#39;20161103 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2016PR_0913&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PR 20160913&#39;</span><span class="p">,</span> <span class="s1">&#39;20160913 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20160913&#39;</span><span class="p">,</span> <span class="p">]),</span>
           <span class="s1">&#39;2016PR_0628&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20160628 PP&#39;</span><span class="p">,</span> <span class="s1">&#39;20160628 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20160628&#39;</span><span class="p">,</span> <span class="s1">&#39;20160628 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;Federal Primary, 2016&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2016PP&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;Presidential Primary 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;Presidential Primary Election 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;16 PRESIDENTIAL PRIMARY&#39;</span><span class="p">,</span> <span class="s1">&#39;20160419 PP&#39;</span><span class="p">,</span> <span class="s1">&#39;PP 20160419&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 Presidential Primary&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESIDENTIAL PRIMARY ELECTION 2016&#39;</span><span class="p">,</span>  <span class="s1">&#39;20160412 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;20160419 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESIDENTIAL PRIMARY 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;Presidential Primary, 2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 PRESIDENTIAL PRIMARY&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 Presidential Primary Election&#39;</span><span class="p">,</span> <span class="p">]),</span>
           <span class="s1">&#39;2016SP_0419&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20160419 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 20160419&#39;</span><span class="p">,</span> <span class="s1">&#39;2016 SD 9 SPECIAL&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2016SP_0213&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20160223 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2017GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20171107 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20171107&#39;</span><span class="p">,</span><span class="s1">&#39;2017 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20171107&#39;</span><span class="p">,</span> <span class="s1">&#39;17 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;2017 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20171107 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2017PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PR 20170912&#39;</span><span class="p">,</span><span class="s1">&#39;20170912 RO&#39;</span><span class="p">,</span> <span class="s1">&#39;PR 20170912&#39;</span><span class="p">,</span> <span class="s1">&#39;20170926 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY ELECTION 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2017&#39;</span><span class="p">,</span> <span class="s1">&#39;17 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20170912 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;20170912 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2017SP_0524&#39;</span><span class="p">:[</span><span class="s1">&#39;20170523 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2017SP_0214&#39;</span><span class="p">:[</span><span class="s1">&#39;20170214 SP&#39;</span><span class="p">],</span>
           <span class="s1">&#39;2018GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;2018 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election, 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20181204&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;18 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;2018 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20181106 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GE 20181106&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2018PR_0913&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20180913 PR&#39;</span><span class="p">,</span><span class="s1">&#39;PR 20180913&#39;</span><span class="p">,</span><span class="s1">&#39;Primary Election, 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;18 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY ELECTION 2018&#39;</span><span class="p">,</span> <span class="s1">&#39;2018 Primary Election&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2018PR_0626&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20180626 PR&#39;</span><span class="p">,</span><span class="s1">&#39;PR 20180626&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2018SP_0424&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20180424 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 20180424&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2019GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GENERAL 2019&#39;</span><span class="p">,</span><span class="s1">&#39;GE 20191105&#39;</span><span class="p">,</span><span class="s1">&#39;2019 General Election&#39;</span><span class="p">,</span> <span class="s1">&#39;20191105 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;2019 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2019&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2019PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PR 20190625&#39;</span><span class="p">,</span> <span class="s1">&#39;20190625 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2019SP_0514&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20190514 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 2019-05-&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2019SP_0226&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20190226 SP&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 20190226&#39;</span><span class="p">,</span> <span class="s1">&#39;20190226 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2020GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GE 20201103&#39;</span><span class="p">,</span><span class="s1">&#39;General Election, 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;2020 GENERAL ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;20201103 GE&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERAL ELECTION 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;General Election 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;2020 General Election&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2020PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PRIMARY ELECTION 2020&#39;</span><span class="p">,</span> <span class="s1">&#39;2020 JUNE PRIMARY&#39;</span><span class="p">,</span> <span class="s1">&#39;2020 Presidential Primary Election&#39;</span><span class="p">,</span><span class="s1">&#39;20200623 PR&#39;</span><span class="p">,</span> <span class="s1">&#39;PP 20200623&#39;</span><span class="p">,</span> <span class="s1">&#39;20200623 PP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2020SP_1222&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;SP 20201222&#39;</span><span class="p">,</span> <span class="s1">&#39;SP 20200202&#39;</span><span class="p">,</span> <span class="s1">&#39;20201222 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2021GE&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GE 20211102&#39;</span><span class="p">,</span><span class="s1">&#39;20211102 GE&#39;</span><span class="p">,</span> <span class="p">]),</span>
           <span class="s1">&#39;2021PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;PR 20210622&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2021&#39;</span><span class="p">,</span> <span class="s1">&#39;20210622 PR&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2021SP_1102&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;SP 20211102&#39;</span><span class="p">,</span><span class="s1">&#39;20211102 GE&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2021SP_0323&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20210323 SP&#39;</span><span class="p">,</span><span class="s1">&#39;SP 20210323&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2021SP_0223&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20210223 SP&#39;</span><span class="p">,</span><span class="s1">&#39;SP 20210223&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2021SP_0202&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;SP 20210202&#39;</span><span class="p">,</span><span class="s1">&#39;20210202 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2022PR&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20220628 PR&#39;</span><span class="p">,</span><span class="s1">&#39;PR 20220628&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2022SP_0524&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20220524 SP&#39;</span><span class="p">,</span><span class="s1">&#39;SP 20220524&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2022SP_0322&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20220322 SP&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2022SP_0215&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;20220215 SP&#39;</span><span class="p">,</span><span class="s1">&#39;SP 20220215&#39;</span><span class="p">]),</span>
           <span class="s1">&#39;2022SP_0118&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;GE 20220118&#39;</span><span class="p">,</span><span class="s1">&#39;20220118 SP&#39;</span><span class="p">]),</span>
            <span class="s1">&#39;_AMBIG&#39;</span><span class="p">:</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;08 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;14 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY 2014&#39;</span><span class="p">,</span> <span class="s1">&#39;12 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;Primary Election, 2012&#39;</span><span class="p">,</span> <span class="s1">&#39;2012 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;2012 Primary Election&#39;</span><span class="p">,</span><span class="s1">&#39;Primary Election, 2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2008 PRIMARY ELECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;Special Election, 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;SPECIAL ELECTION 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;20110502 GE&#39;</span><span class="p">])}</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Standardize election identifiers</span>
<span class="k">def</span> <span class="nf">get_common_id</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">id_dict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">id_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">key</span>

    <span class="k">return</span> <span class="kc">None</span>

<span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;Clean_Elec_List&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;ElecList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">progress_apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">set</span><span class="p">([</span><span class="n">get_common_id</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ID_dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]))</span>


<span class="c1">#Create dummy columns where 1 = Voted</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">ID_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
    <span class="n">nycha_voter_set</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="p">[</span><span class="s1">&#39;Clean_Elec_List&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Write cleaned set</span>
<span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Prepared_NYCHA_Voter_Set_2022.csv&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h3 id="Computing-Outputs">Computing Outputs<a class="anchor-link" href="#Computing-Outputs">&#182;</a></h3><p>For the following products (and in the actual analysis of NYCHA voter turnout), the implied denominator is the total number of registered voters within the relevant subset. The alternative -- eligible voters at NYCHA developments in the relevant subset -- was not used, due to the fact that a substantial number of unofficial / unauthorized residents are included in the registered voter set. Using NYCHA population figures of any type as the denomninator, therefore, would artifically inflate turnout percentages in most cases, as the number of registered voters frequenty exceeds the official total of residents over 18.</p>

        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Reload fully filtered and prepared voter dataset</span>
<span class="n">nycha_voter_set</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Prepared_NYCHA_Voter_Set_2022.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Produce average turnout at NYCHA developments by election, by borough</span>
<span class="n">boro</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>

<span class="c1">#...by assembly district:</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;AD&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>

<span class="c1">#...by state senate district:</span>
<span class="n">sd</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;SD&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>

<span class="c1">#...by congressional district:</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;CD&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>

<span class="c1">#...by city council district:</span>
<span class="n">council</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Council_Dist&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>

<span class="c1">#...by development, categorized by borough:</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;BOROUGH&#39;</span><span class="p">,</span><span class="s1">&#39;TDS&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">nycha_voter_set</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">13</span><span class="p">:]]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">boro</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;BROOKLYN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Import development info for filtering and display</span>
<span class="n">dev_info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;overview_table_data.csv&#39;</span><span class="p">)</span>
<span class="n">dev_info</span> <span class="o">=</span> <span class="n">dev_info</span><span class="p">[[</span><span class="s1">&#39;TDS&#39;</span><span class="p">,</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">,</span><span class="s1">&#39;CONS_TDS&#39;</span><span class="p">,</span><span class="s1">&#39;CONS_NAME&#39;</span><span class="p">,</span><span class="s1">&#39;GEO_BORO&#39;</span><span class="p">]]</span>

<span class="c1">#Pull in population data</span>
<span class="k">def</span> <span class="nf">get_latest_records</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">group_col</span><span class="p">,</span> <span class="n">date_col</span><span class="p">):</span>
    <span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">group_col</span><span class="p">):</span>
        <span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">new_df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">date_col</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">new_df</span>

<span class="n">pop_facts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;Dev_Population_Facts.xlsx&#39;</span><span class="p">)</span>
<span class="n">recent_pop</span> <span class="o">=</span> <span class="n">get_latest_records</span><span class="p">(</span><span class="n">pop_facts</span><span class="p">,</span> <span class="s1">&#39;TDS_NUMBER&#39;</span><span class="p">,</span> <span class="s1">&#39;MONTH_ID&#39;</span><span class="p">)</span>
<span class="n">recent_pop</span><span class="p">[</span><span class="s1">&#39;18_PLUS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">recent_pop</span><span class="p">[</span><span class="s1">&#39;POPULATION&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">recent_pop</span><span class="p">[</span><span class="s1">&#39;MINORS_UNDER_18&#39;</span><span class="p">]</span>

<span class="n">dev_info</span> <span class="o">=</span> <span class="n">dev_info</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">recent_pop</span><span class="p">[[</span><span class="s1">&#39;TDS_NUMBER&#39;</span><span class="p">,</span><span class="s1">&#39;18_PLUS&#39;</span><span class="p">,</span><span class="s1">&#39;MONTH_ID&#39;</span><span class="p">]],</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;TDS&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;TDS_NUMBER&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Merge dev data with voter records</span>
<span class="n">rates_by_dev_enriched</span> <span class="o">=</span> <span class="n">dev_info</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dev</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;TDS&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;TDS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rates_by_dev_enriched</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;GEO_BORO&#39;</span><span class="p">,</span><span class="s1">&#39;CONS_TDS&#39;</span><span class="p">,</span><span class="s1">&#39;TDS&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;GEO_BORO&#39;</span><span class="p">,</span><span class="s1">&#39;CONS_TDS&#39;</span><span class="p">,</span><span class="s1">&#39;TDS&#39;</span><span class="p">])</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">elec_type_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;GENERAL&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;2007GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2008GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2010GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2011GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2012GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2013GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2014GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2015GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2017GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2018GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2019GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2020GE&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021GE&#39;</span><span class="p">},</span>
                 <span class="s1">&#39;PRIMARY&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;2007PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2008PP&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2008PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2010PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2011PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2012PP&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2012PR_0620&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2012PR_0913&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2013PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2014PR_0624&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2014PR_0909&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2015PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016PP&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016PR_0628&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016PR_0913&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2017PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2018PR_0626&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2018PR_0913&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2019PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2020PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021PR&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2022PR&#39;</span><span class="p">},</span>
                 <span class="s1">&#39;RUNOFF&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;2009RO&#39;</span><span class="p">,</span> <span class="s1">&#39;2013RO&#39;</span><span class="p">},</span>
                 <span class="s1">&#39;SPECIAL&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;2007SP&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009SP_0224&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009SP_0421&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009SP_0606&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2009SP_0915&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2010SP_0209&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2010SP_0316&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2010SP_0323&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2011SP_0913&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2012SP_0320&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2013SP_0219&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2015SP_0505&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016SP_0213&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2016SP_0419&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2017SP_0214&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2017SP_0524&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2018SP_0424&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2019SP_0514&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2019SP_0226&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2020SP_1222&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021SP_1102&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021SP_0323&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021SP_0223&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2021SP_0202&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2022SP_0524&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2022SP_0322&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2022SP_0215&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;2022SP_0118&#39;</span><span class="p">},</span>
                 <span class="kc">None</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;_AMBIG&#39;</span><span class="p">}}</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">summ_table</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="p">[[</span><span class="s1">&#39;2016GE&#39;</span><span class="p">,</span><span class="s1">&#39;2016PP&#39;</span><span class="p">,</span><span class="s1">&#39;2017GE&#39;</span><span class="p">,</span><span class="s1">&#39;2017PR&#39;</span><span class="p">,</span><span class="s1">&#39;2018GE&#39;</span><span class="p">,</span><span class="s1">&#39;2018PR_0913&#39;</span><span class="p">,</span><span class="s1">&#39;2020GE&#39;</span><span class="p">,</span><span class="s1">&#39;2020PR&#39;</span><span class="p">,</span><span class="s1">&#39;2021GE&#39;</span><span class="p">,</span><span class="s1">&#39;2021PR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">summ_table</span><span class="p">[</span><span class="s1">&#39;YEAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summ_table</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[:</span><span class="mi">4</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">get_type</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dict_name</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dict_name</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">k</span>

<span class="n">summ_table</span><span class="p">[</span><span class="s1">&#39;TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summ_table</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">elec_type_dict</span><span class="p">))</span>
<span class="n">summ_table</span> <span class="o">=</span> <span class="n">summ_table</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="n">summ_table</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;TYPE&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">summ_table</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="p">[[</span><span class="s1">&#39;2016GE&#39;</span><span class="p">,</span><span class="s1">&#39;2016PP&#39;</span><span class="p">,</span><span class="s1">&#39;2017GE&#39;</span><span class="p">,</span><span class="s1">&#39;2017PR&#39;</span><span class="p">,</span><span class="s1">&#39;2018GE&#39;</span><span class="p">,</span><span class="s1">&#39;2018PR_0913&#39;</span><span class="p">,</span><span class="s1">&#39;2020GE&#39;</span><span class="p">,</span><span class="s1">&#39;2020PR&#39;</span><span class="p">,</span><span class="s1">&#39;2021GE&#39;</span><span class="p">,</span><span class="s1">&#39;2021PR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="c1">#.loc[&#39;mean&#39;].reset_index()</span>
<span class="n">summ_table</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Summarize turnout by election type</span>
<span class="n">rates_by_dev_summary</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">rates_by_dev_enriched</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">6</span><span class="p">:])</span>

<span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">elec_type_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">rates_by_dev_summary</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MEDIAN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="p">[</span><span class="n">values</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">rates_by_dev_enriched</span><span class="p">[</span><span class="n">rates_by_dev_enriched</span><span class="p">[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)]</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;Rates_by_Development_2022.xlsx&#39;</span><span class="p">)</span>
<span class="n">rates_by_dev_summary</span><span class="p">[</span><span class="n">rates_by_dev_summary</span><span class="p">[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;None_MEDIAN&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;Rates_by_Development_Summary_2022.xlsx&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
        </div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput " data-mime-type="text/markdown">
            <h3 id="Developments-of-Voting-Rule-WG-Members">Developments of Voting Rule WG Members<a class="anchor-link" href="#Developments-of-Voting-Rule-WG-Members">&#182;</a></h3>
        </div>
        </div>
    </div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Jackson [120, cons 267], Red Hook West [79], Polo Grounds [149], Soundview [71], Howard [72], Bland [54, cons 186], Nostrand [43, cons 36], Riis[18/19], Queensbridge [5/505], </span>
<span class="c1">#Staten Island TBD</span>

<span class="n">member_dev_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">505</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">38</span><span class="p">]</span>
<span class="n">member_data</span> <span class="o">=</span> <span class="n">rates_by_dev_enriched</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">rates_by_dev_enriched</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="s1">&#39;TDS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">member_dev_list</span><span class="p">)]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">member_data_summary</span> <span class="o">=</span> <span class="n">member_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">member_data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">9</span><span class="p">:])</span>
<span class="n">sum_col_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">elec_type_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">member_data_summary</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MEDIAN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">member_data</span><span class="p">[</span><span class="n">values</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">member_data_summary</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MAX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">member_data</span><span class="p">[</span><span class="n">values</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">member_data_summary</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MIN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">member_data</span><span class="p">[</span><span class="n">values</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">sum_col_list</span> <span class="o">=</span> <span class="n">sum_col_list</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MEDIAN&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MAX&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">_MIN&#39;</span><span class="p">]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">riis</span> <span class="o">=</span> <span class="n">member_data_summary</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span>
<span class="n">riis</span> <span class="o">=</span> <span class="n">riis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">riis</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span> <span class="n">columns</span><span class="o">=</span><span class="n">riis</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>

<span class="n">qns</span> <span class="o">=</span> <span class="n">member_data_summary</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]]</span>
<span class="n">qns</span> <span class="o">=</span> <span class="n">qns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">qns</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span> <span class="n">columns</span><span class="o">=</span><span class="n">qns</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>


<span class="n">riis_full</span> <span class="o">=</span> <span class="n">member_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span>
<span class="n">riis_full</span> <span class="o">=</span> <span class="n">riis_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">riis_full</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span> <span class="n">columns</span><span class="o">=</span><span class="n">riis_full</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>

<span class="n">qns_full</span> <span class="o">=</span> <span class="n">member_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]]</span>
<span class="n">qns_full</span> <span class="o">=</span> <span class="n">qns_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="kc">None</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">qns_full</span><span class="o">.</span><span class="n">columns</span><span class="p">},</span> <span class="n">columns</span><span class="o">=</span><span class="n">qns_full</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">combine_proportions</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
    <span class="n">votes_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">votes_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">column</span><span class="p">]</span><span class="o">*</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;_counter&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">votes_list</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;_counter&#39;</span><span class="p">])</span>


<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sum_col_list</span><span class="p">:</span>
    <span class="n">riis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">combine_proportions</span><span class="p">(</span><span class="n">riis</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">col</span><span class="p">)</span>
    <span class="n">qns</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">combine_proportions</span><span class="p">(</span><span class="n">qns</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">col</span><span class="p">)</span>

<span class="n">riis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RIIS_COMBINED&#39;</span>
<span class="n">qns</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;QUEENSBRIDGE_COMBINED&#39;</span>

<span class="c1">#Same for full data</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">member_data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">9</span><span class="p">:]:</span>
    <span class="n">riis_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">combine_proportions</span><span class="p">(</span><span class="n">riis_full</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">col</span><span class="p">)</span>
    <span class="n">qns_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">combine_proportions</span><span class="p">(</span><span class="n">qns_full</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">col</span><span class="p">)</span>

<span class="n">riis_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RIIS_COMBINED&#39;</span>
<span class="n">qns_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;QUEENSBRIDGE_COMBINED&#39;</span>

</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">member_data_summary</span> <span class="o">=</span> <span class="n">member_data_summary</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">riis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qns</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">member_data</span> <span class="o">=</span> <span class="n">member_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">riis_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qns_full</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">member_data_tables</span> <span class="o">=</span> <span class="n">member_data_summary</span><span class="p">[[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">sum_col_list</span><span class="p">]</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">member_data_tables</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">t</span><span class="p">[</span><span class="s1">&#39;TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;level_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">t</span><span class="p">[</span><span class="s1">&#39;MEASURE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;level_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">t</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">,</span><span class="s1">&#39;_del&#39;</span><span class="p">,</span><span class="s1">&#39;TURNOUT&#39;</span><span class="p">,</span><span class="s1">&#39;TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;MEASURE&#39;</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">,</span><span class="s1">&#39;TYPE&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;TURNOUT&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;MEASURE&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">writer</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="s1">&#39;_tables_for_members/TABLES.xlsx&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
    <span class="n">t_sub</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
    <span class="n">t_sub</span><span class="p">[</span><span class="s1">&#39;OTHER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t_sub</span><span class="p">[[</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="s1">&#39;RUNOFF&#39;</span><span class="p">,</span><span class="s1">&#39;SPECIAL&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">t_sub</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="s1">&#39;RUNOFF&#39;</span><span class="p">,</span><span class="s1">&#39;SPECIAL&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">elec_by_development</span> <span class="o">=</span> <span class="n">member_data</span><span class="p">[[</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">]</span><span class="o">+</span><span class="nb">list</span><span class="p">(</span><span class="n">member_data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">9</span><span class="p">:])]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;DEV_NAME&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
    <div class="jp-Cell-inputWrapper">
        <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
        </div>
        <div class="jp-InputArea jp-Cell-inputArea">
            
            <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                <div class="CodeMirror cm-s-jupyter">
                    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">elec_by_development</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;_TEMP_wg_elections.xlsx&#39;</span><span class="p">)</span>
</pre></div>

                </div>
            </div>
        </div>
    </div>

</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="get-in-touch" class="colorlib-bg-color">
				<div class="colorlib-narrow-content">
					<div class="row">
						<div class="col-md-6 animate-box" data-animate-effect="fadeInLeft">
							<h2>Get in Touch!</h2>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 col-md-offset-3 col-md-pull-3 animate-box"
							data-animate-effect="fadeInLeft">
							<p class="colorlib-lead">Reach out to
								collaborate, grab coffee, or just to
								chat about the cities and spaces we live in.</p>
							<p><a href="mailto:kyle@kyleslugg.com" class="btn btn-primary
										btn-learn">Email me!</a></p>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- jQuery -->
	<script src="../js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="../js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="../js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="../js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="../js/jquery.flexslider-min.js"></script>
	<!-- Sticky Kit -->
	<script src="../js/sticky-kit.min.js"></script>


	<!-- MAIN JS -->
	<script src="../js/main.js"></script>

</body>

</html>